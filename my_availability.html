<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interview Scheduler</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 20px;
    }
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 20px;
      max-width: 700px;
      margin: 20px auto;
    }
    label {
      font-weight: bold;
      display: block;
      margin: 8px 0 4px;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      background: #3498db;
      color: white;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-right: 6px;
    }
    button:hover { background: #2980b9; }
    .slot {
      background: #ecf0f1;
      padding: 12px;
      border-radius: 8px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .slot span {
      font-size: 16px;
      color: #2c3e50;
    }
    .delete-btn {
      background: #e74c3c;
      font-size: 12px;
      padding: 4px 8px;
    }
    .public-title {
      font-size: 18px;
      font-weight: bold;
      color: #34495e;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>
  <h1>Interview Scheduler</h1>

  <!-- Private mode form -->
  <div id="privateSection" class="card" style="display:none;">
    <label>Company Name:</label>
    <input type="text" id="companyInput" placeholder="Enter company name">
    <label>Consultant / Recruiter:</label>
    <input type="text" id="consultantInput" placeholder="Enter consultant name">
    <label>Interview Date & Time:</label>
    <input type="datetime-local" id="datetimeInput">
    <button onclick="addInterview()">Add Interview</button>
    <h2 style="margin-top:20px;">Your Interviews</h2>
    <div id="interviewList"></div>
  </div>

  <!-- Public mode view -->
  <div id="publicSection" class="card" style="display:none;">
    <div class="public-title">ðŸ“… Booked Slots</div>
    <div id="publicList"></div>
  </div>

  <script>
    // Auto mode detection
    let MODE = "private";
    if (location.hostname.includes("github.io")) {
      MODE = "public";
    }

    let interviews = JSON.parse(localStorage.getItem("interviews") || "[]");

    function saveData() {
      localStorage.setItem("interviews", JSON.stringify(interviews));
    }

    function formatDateTime(dtString) {
      const options = { 
        day: '2-digit', month: 'short', year: 'numeric', 
        hour: '2-digit', minute: '2-digit', hour12: true 
      };
      return new Date(dtString).toLocaleString('en-GB', options);
    }

    function render() {
      const list = document.getElementById("interviewList");
      const publicList = document.getElementById("publicList");
      list.innerHTML = "";
      publicList.innerHTML = "";

      interviews.forEach((item, index) => {
        // Private mode: show full details + delete
        const div = document.createElement("div");
        div.className = "slot";
        div.innerHTML = `<span><b>${item.company}</b> | ${item.consultant} | ${formatDateTime(item.datetime)}</span>
                         <button class="delete-btn" onclick="deleteInterview(${index})">Delete</button>`;
        list.appendChild(div);

        // Public mode: only booked slot
        const pDiv = document.createElement("div");
        pDiv.className = "slot";
        pDiv.innerHTML = `<span>${formatDateTime(item.datetime)}</span>`;
        publicList.appendChild(pDiv);
      });
    }

    function addInterview() {
      const company = document.getElementById("companyInput").value.trim();
      const consultant = document.getElementById("consultantInput").value.trim();
      const datetime = document.getElementById("datetimeInput").value;

      if (!company || !consultant || !datetime) {
        alert("Please fill all fields");
        return;
      }

      interviews.push({ company, consultant, datetime });
      saveData();
      render();

      document.getElementById("companyInput").value = "";
      document.getElementById("consultantInput").value = "";
      document.getElementById("datetimeInput").value = "";
    }

    function deleteInterview(index) {
      interviews.splice(index, 1);
      saveData();
      render();
    }

    // Show proper section
    if (MODE === "private") {
      document.getElementById("privateSection").style.display = "block";
    } else {
      document.getElementById("publicSection").style.display = "block";
    }

    render();
  </script>
</body>
</html>
