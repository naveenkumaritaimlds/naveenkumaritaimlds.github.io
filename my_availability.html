<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Availability - Naveen Kumar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin: 20px 0;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .intro-text {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 25px;
            text-align: center;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .availability-note {
            background: #e8f5e8;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
            text-align: center;
        }

        .calendar-container {
            margin: 40px 0;
        }

        .week-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .week-dates {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: 100px repeat(7, 1fr);
            gap: 1px;
            background: #e0e0e0;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .time-header {
            background: #34495e;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: bold;
        }

        .day-header {
            background: #34495e;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: bold;
        }

        .time-slot {
            background: #f8f9fa;
            padding: 10px;
            text-align: center;
            font-size: 0.9em;
            border-right: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .time-label {
            background: #f8f9fa;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .available {
            background: white;
        }

        .busy {
            background: #fff8e1;
            border-left: 3px solid #ffd54f;
        }

        .busy::after {
            content: "Busy";
            font-size: 0.8em;
            color: #ff9800;
            font-weight: bold;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        .available-color {
            background: white;
            border: 1px solid #e0e0e0;
        }

        .busy-color {
            background: #fff8e1;
            border: 1px solid #ffd54f;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
            color: #666;
        }

        @media (max-width: 768px) {
            .calendar-grid {
                grid-template-columns: 60px repeat(7, 1fr);
                font-size: 0.8em;
            }
            
            .time-slot {
                padding: 5px;
                min-height: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>My Availability</h1>
            <p class="subtitle">Next 7-Day Schedule</p>
        </header>

        <section class="intro">
            <p class="intro-text">
                Welcome! This calendar shows my availability for the upcoming week. 
                I'm generally available for meetings and discussions throughout the day, 
                with some pre-planned commitments as shown below.
            </p>
            
            <div class="availability-note">
                <strong>Note:</strong> I'm available for interviews and meetings most of the time. 
                Feel free to schedule a session during any available slot.
            </div>
        </section>

        <section class="calendar-container">
            <div class="week-nav">
                <div class="week-dates" id="week-dates">Loading dates...</div>
            </div>

            <div class="calendar-grid" id="calendar-grid">
                <!-- Calendar will be generated by JavaScript -->
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color available-color"></div>
                    <span>Available for meetings</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color busy-color"></div>
                    <span>Pre-committed / Busy</span>
                </div>
            </div>
        </section>

        <footer class="footer">
            <p>Last updated: <span id="current-date"></span></p>
        </footer>
    </div>

    <script>
        // Sample busy slots data (in a real scenario, this would come from slots.json)
        const busySlots = [
            {
                "company": "Tiger Analytics",
                "consultant": "Shailaja",
                "datetime": "2025-11-24T12:00",
                "status": "scheduled"
            },
            {
                "company": "Firstsource",
                "consultant": "Khan Sahab",
                "datetime": "2025-11-21T12:00",
                "status": "scheduled"
            },
            {
                "company": "Geektrust: FoldHealth",
                "consultant": "Sai Lakshmi Foldhealth",
                "datetime": "2025-11-24T10:00",
                "status": "scheduled"
            },
            {
                "company": "CBA",
                "consultant": "Suraj Sinha",
                "datetime": "2025-11-21T14:00",
                "status": "scheduled"
            }
        ];

        // Generate the next 7 days from today
        function getNextSevenDays() {
            const days = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date();
                date.setDate(date.getDate() + i);
                days.push(date);
            }
            return days;
        }

        // Generate time slots from 9 AM to 6 PM
        function getTimeSlots() {
            const slots = [];
            for (let hour = 9; hour <= 18; hour++) {
                const timeString = `${hour.toString().padStart(2, '0')}:00`;
                slots.push(timeString);
            }
            return slots;
        }

        // Format date to display as "Mon, 21 Nov"
        function formatDate(date) {
            const options = { weekday: 'short', day: 'numeric', month: 'short' };
            return date.toLocaleDateString('en-US', options);
        }

        // Format date for comparison (YYYY-MM-DD)
        function formatDateForComparison(date) {
            return date.toISOString().split('T')[0];
        }

        // Check if a time slot is busy
        function isTimeSlotBusy(day, timeSlot) {
            const dayFormatted = formatDateForComparison(day);
            const hour = parseInt(timeSlot.split(':')[0]);
            
            return busySlots.some(slot => {
                const slotDate = new Date(slot.datetime);
                const slotDateFormatted = formatDateForComparison(slotDate);
                const slotHour = slotDate.getHours();
                
                return dayFormatted === slotDateFormatted && hour === slotHour;
            });
        }

        // Generate the calendar
        function generateCalendar() {
            const days = getNextSevenDays();
            const timeSlots = getTimeSlots();
            const calendarGrid = document.getElementById('calendar-grid');
            
            // Clear existing content
            calendarGrid.innerHTML = '';
            
            // Add empty cell in top-left corner
            calendarGrid.appendChild(document.createElement('div'));
            
            // Add day headers
            days.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                dayHeader.textContent = formatDate(day);
                calendarGrid.appendChild(dayHeader);
            });
            
            // Add time slots and availability
            timeSlots.forEach(timeSlot => {
                // Add time label
                const timeLabel = document.createElement('div');
                timeLabel.className = 'time-label';
                timeLabel.textContent = timeSlot;
                calendarGrid.appendChild(timeLabel);
                
                // Add availability for each day at this time
                days.forEach(day => {
                    const timeSlotElement = document.createElement('div');
                    timeSlotElement.className = 'time-slot ' + 
                        (isTimeSlotBusy(day, timeSlot) ? 'busy' : 'available');
                    calendarGrid.appendChild(timeSlotElement);
                });
            });
            
            // Update week dates display
            const weekDatesElement = document.getElementById('week-dates');
            const startDate = formatDate(days[0]);
            const endDate = formatDate(days[days.length - 1]);
            weekDatesElement.textContent = `${startDate} - ${endDate}`;
        }

        // Update current date in footer
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('current-date').textContent = 
                now.toLocaleDateString('en-US', options);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            generateCalendar();
            updateCurrentDate();
            
            // In a real implementation, you would fetch data from slots.json here
            // fetch('slots.json')
            //   .then(response => response.json())
            //   .then(data => {
            //       busySlots = data;
            //       generateCalendar();
            //   });
        });
    </script>
</body>
</html>
